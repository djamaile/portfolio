"use strict";(globalThis.webpackChunkdjamaile_dev=globalThis.webpackChunkdjamaile_dev||[]).push([[749],{1895(e){e.exports=JSON.parse('{"archive":{"blogPosts":[{"id":"leaving-bol-dot-com","metadata":{"permalink":"/blog/leaving-bol-dot-com","editUrl":"https://github.com/djamaile/portfolio/edit/master/blog/2022-10-03-leaving-bol.md","source":"@site/blog/2022-10-03-leaving-bol.md","title":"Leaving Bol.com","description":"I recently made the decision to leave Bol.com.","date":"2022-10-03T00:00:00.000Z","tags":[{"inline":true,"label":"Bol.com","permalink":"/blog/tags/bol-com"},{"inline":true,"label":"Spotify","permalink":"/blog/tags/spotify"}],"readingTime":1.89,"hasTruncateMarker":true,"authors":[{"name":"Djamaile Rahamat","title":"Software Engineer","url":"https://github.com/djamaile","imageURL":"https://avatars.githubusercontent.com/u/15789670?v=4","key":"djamaile","page":null}],"frontMatter":{"slug":"leaving-bol-dot-com","title":"Leaving Bol.com","authors":["djamaile"],"tags":["Bol.com","Spotify"]},"unlisted":false,"nextItem":{"title":"Using KEDA and Prometheus to scale your k8s workloads","permalink":"/blog/using-keda-and-prometheus"}},"content":"I recently made the decision to leave Bol.com.\\n\\n\x3c!--truncate--\x3e\\n\\n## The last two years\\n\\nSo, for the past two years I have been a Software Engineer at Bol.com.\\nNot only that I was also enrolled in a special program called: Young Professional.\\nBeing a YP it is expected of you to learn, move around and also build a community within Bol.com with other YP\'s.\\nIt\'s for sure a good feeling, because sometimes it felt like being back at school :smile.\\n\\n### The good\\n\\nBol.com is a great company to start out in, maybe even the best.\\nWhy? Because Bol.com gives you a lot of freedom to do **a lot**.\\nMeaning, in big companies it can be quite hard to just test out new shiny libraries, push to main or even to switch teams.\\nIn Bol.com, I could do all of that and even more. In addition, Bol.com also uses a lot of new technology and most of the time it is ahead of what the market is doing (platform wise at least). \\n\\nNot to mention that I also really enjoyed the YP community. Being in the YP community meant you got free trips, events and swag!\\nUnfortunately, though I joined during COVID. So, I didn\'t get to get the full experience, but with what I got, I had a lot of fun. Lastly, the campus of Bol.com is also very nice with great food, out door seating and a super market on the ground floor. \\n\\n### The bad\\n\\nAbout Bol.com there wasn\'t much *bad* honestly. I think one thing what made me look for other opportunities, was because it was just time to do so. I interned at Bol.com for 6 months + worked there for an additional 2 years. Also, my YP track was ending so it only felt natural leaving. So, yeah this was probably a click bait header.\\n\\n## The future\\n\\nSo, what am I doing these days? In my second year at Bol.com I was working on implementing [Backstage.io](https://backstage.io/) within the company. Backstage is a developer experience portal developed by Spotify. So..... after a long interview I am proud to say I joined Spotify where I\'ll be working on the internal Backstage. Other than that I don\'t have much too say yet... check back after a year!"},{"id":"using-keda-and-prometheus","metadata":{"permalink":"/blog/using-keda-and-prometheus","editUrl":"https://github.com/djamaile/portfolio/edit/master/blog/2021-10-31-using-keda-and-prometheus-to-scale.md","source":"@site/blog/2021-10-31-using-keda-and-prometheus-to-scale.md","title":"Using KEDA and Prometheus to scale your k8s workloads","description":"These days, everyone and their grandma are using Kubernetes and one important","date":"2021-10-31T00:00:00.000Z","tags":[{"inline":true,"label":"keda","permalink":"/blog/tags/keda"},{"inline":true,"label":"prometheus","permalink":"/blog/tags/prometheus"},{"inline":true,"label":"kubernetes","permalink":"/blog/tags/kubernetes"}],"readingTime":7.64,"hasTruncateMarker":true,"authors":[{"name":"Djamaile Rahamat","title":"Software Engineer","url":"https://github.com/djamaile","imageURL":"https://avatars.githubusercontent.com/u/15789670?v=4","key":"djamaile","page":null}],"frontMatter":{"slug":"using-keda-and-prometheus","title":"Using KEDA and Prometheus to scale your k8s workloads","authors":["djamaile"],"tags":["keda","prometheus","kubernetes"]},"unlisted":false,"prevItem":{"title":"Leaving Bol.com","permalink":"/blog/leaving-bol-dot-com"},"nextItem":{"title":"How to setup husky, eslint and prettier within minutes","permalink":"/blog/how-to-setup-husky-eslint-prettier"}},"content":"These days, everyone and their grandma are using Kubernetes and one important\\naspect of Kubernetes is scaling your workloads. With KEDA, it is extremely\\nsimple to scale your workloads! Let\u2019s have a look.\\n\\n\x3c!--truncate--\x3e\\n\\nrepository: https://github.com/djamaile/keda-demo\\n\\n### Introduction\\n\\nStraight from the website of [KEDA](https://keda.sh):\\n> KEDA is a Kubernetes-based Event Driven\\nAutoscaler. With KEDA, you can drive the scaling of any container in Kubernetes\\nbased on the number of events needing to be processed.\\n\\nKEDA provides many \'triggers\' on which your application can scale on. For\\nexample, Prometheus, PubSub, Postgres and many more. In this blog post we will\\nfocus on Prometheus.\\n\\n### Starting up\\n\\nFirst let\'s spin up a cluster! I am using [kind](https://kind.sigs.k8s.io/) but\\nyou are free to use minikube if you prefer that :).\\n\\n```sh\\n$ kind create cluster\\n```\\n\\n*Create the namespace*\\n\\n```sh\\n$ kubectl create ns keda-demo\\n```\\n\\n*Switch to the namespace*\\n\\n```sh\\n$ kubectl config set-context --current --namespace=keda-demo\\n```\\n\\nIf the cluster is spun up, we can start deploying our Prometheus. For this, I\\nhave already written a prometheus manifest so you won\u2019t have to do it.\\n\\n*prometheus.yaml*\\n```yaml\\napiVersion: rbac.authorization.k8s.io/v1\\nkind: ClusterRole\\nmetadata:\\n  name: prometheus\\nrules:\\n  - apiGroups: [\\"\\"]\\n    resources:\\n      - services\\n    verbs: [\\"get\\", \\"list\\", \\"watch\\"]\\n  - nonResourceURLs: [\\"/metrics\\"]\\n    verbs: [\\"get\\"]\\n---\\napiVersion: v1\\nkind: ServiceAccount\\nmetadata:\\n  name: keda-demo\\n---\\napiVersion: rbac.authorization.k8s.io/v1\\nkind: ClusterRoleBinding\\nmetadata:\\n  name: prometheus\\nroleRef:\\n  apiGroup: rbac.authorization.k8s.io\\n  kind: ClusterRole\\n  name: prometheus\\nsubjects:\\n  - kind: ServiceAccount\\n    name: keda-demo\\n    namespace: keda-demo\\n---\\napiVersion: v1\\nkind: ConfigMap\\nmetadata:\\n  name: prom-conf\\n  labels:\\n    name: prom-conf\\ndata:\\n  prometheus.yml: |-\\n    global:\\n      scrape_interval: 5s\\n      evaluation_interval: 5s\\n    scrape_configs:\\n      - job_name: \'go-prom-job\'\\n        kubernetes_sd_configs:\\n        - role: service\\n        relabel_configs:\\n        - source_labels: [__meta_kubernetes_service_label_run]\\n          regex: go-prom-app-service\\n          action: keep\\n---\\napiVersion: apps/v1\\nkind: Deployment\\nmetadata:\\n  name: prometheus-deployment\\nspec:\\n  replicas: 1\\n  selector:\\n    matchLabels:\\n      app: prometheus-server\\n  template:\\n    metadata:\\n      labels:\\n        app: prometheus-server\\n    spec:\\n      serviceAccountName: keda-demo\\n      containers:\\n        - name: prometheus\\n          image: prom/prometheus\\n          args:\\n            - \\"--config.file=/etc/prometheus/prometheus.yml\\"\\n            - \\"--storage.tsdb.path=/prometheus/\\"\\n          ports:\\n            - containerPort: 9090\\n          volumeMounts:\\n            - name: prometheus-config-volume\\n              mountPath: /etc/prometheus/\\n            - name: prometheus-storage-volume\\n              mountPath: /prometheus/\\n      volumes:\\n        - name: prometheus-config-volume\\n          configMap:\\n            defaultMode: 420\\n            name: prom-conf\\n\\n        - name: prometheus-storage-volume\\n          emptyDir: {}\\n---\\napiVersion: v1\\nkind: Service\\nmetadata:\\n  name: prometheus-service\\nspec:\\n  ports:\\n    - port: 9090\\n      protocol: TCP\\n  selector:\\n    app: prometheus-server\\n```\\n\\nThe Prometheus manifest is really simple. Just a Prometheus workload with a\\nclusterrole and a clusterrolebinding. Don\'t forget to apply the manifest:\\n\\n```sh\\n$ kubectl apply -f prometheus.yaml\\n```\\n\\nOnce the pod is up and running, let\'s see if it also works:\\n\\n```sh\\n$ kubectl port-forward svc/prometheus-service 9090\\n```\\n\\nNow visit `http://localhost:9090` and you should see the user interface of\\nPrometheus.\\n\\n### Deploying Keda\\n\\nWe can now deploy the KEDA operator. KEDA provides multiple ways to deploy their\\noperator, but for now we will use the k8s manifest.\\n\\n```sh\\n$ kubectl apply -f https://github.com/kedacore/keda/releases/download/v2.4.0/keda-2.4.0.yaml\\n```\\n\\nNow there should be two pods in the namespace `keda` you can check it with the\\nfollowing command:\\n\\n```sh\\n$ kubectl get pods -n keda\\n```\\n\\nAs you can see there are two pods being spinned up:\\n\\n```sh\\non \ud83e\udd20 kind-kind (keda) Desktop/projects/keda-prometheus \u2601\ufe0f  default\\n\ud83d\udd59[ 07:35:40 ] \u276f kubectl get pods                                                         335ms\\nNAME                                      READY   STATUS              RESTARTS   AGE\\nkeda-metrics-apiserver-66b8c68649-2mwf8   0/1     ContainerCreating   0          5s\\nkeda-operator-574c6d4769-q9mlc            0/1     ContainerCreating   0          5s\\n```\\n\\nThe metrics-apiserver exposes data to the Horizontal Pod Autoscaler, which gets\\nconsumed by a deployment. The operator pod activates Kubernetes deployments to\\nscale to and from zero on no events.\\n\\n### Creating the application (Optional)\\n\\nThe application is a simple go application that increments the metric\\n`http_requests` when you visit it. This section is optional because you are also\\nfree to use my docker image.\\n\\nin your folder execute the following:\\n\\n```sh\\ngo mod init github.com/djamaile/keda-demo\\n```\\n\\nThen in your `main.go` you can put in the following code:\\n\\n```go\\npackage main\\n\\nimport (\\n\\t\\"fmt\\"\\n\\t\\"log\\"\\n\\t\\"net/http\\"\\n\\n\\t\\"github.com/prometheus/client_golang/prometheus\\"\\n\\t\\"github.com/prometheus/client_golang/prometheus/promhttp\\"\\n)\\n\\ntype Labels map[string]string\\n\\nvar (\\n\\thttpRequestsCounter = prometheus.NewCounter(prometheus.CounterOpts{\\n\\t\\tName: \\"http_requests\\",\\n\\t\\tHelp: \\"number of http requests\\",\\n\\t})\\n)\\n\\nfunc init() {\\n\\t// Metrics have to be registered to be exposed:\\n\\tprometheus.MustRegister(httpRequestsCounter)\\n}\\n\\nfunc main() {\\n\\thttp.Handle(\\"/metrics\\", promhttp.Handler())\\n\\thttp.HandleFunc(\\"/\\", func(w http.ResponseWriter, r *http.Request) {\\n\\t\\tdefer httpRequestsCounter.Inc()\\n\\t\\tfmt.Fprintf(w, \\"Hello, you\'ve requested: %s\\\\n\\", r.URL.Path)\\n\\t})\\n\\tlog.Fatal(http.ListenAndServe(\\":8080\\", nil))\\n}\\n```\\n\\nNow build the go application with:\\n\\n```sh\\n$ go mod tidy\\n```\\n\\nLet\'s then make a simple `Dockerfile` for it:\\n\\n```dockerfile\\nFROM golang as build-stage\\n\\nCOPY go.mod /\\nCOPY go.sum /\\nCOPY main.go /\\nRUN cd / && CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o go-prom-app\\n\\nFROM alpine\\nCOPY --from=build-stage /go-prom-app /\\nEXPOSE 8080\\nCMD [\\"/go-prom-app\\"]\\n```\\n\\nOnly thing left is to build and push the image:\\n\\n```sh\\n$ docker build -t <your_username>/keda .\\n$ docker push <your_username>/keda\\n```\\n\\n### Running the application\\n\\nIf you don\u2019t have a Docker account or don\u2019t want to use it, that\u2019s fine. You can\\nuse my docker image! Let\u2019s get our go application running in our cluster, for\\nthat we need some k8s manifests. Not to worry because I already wrote them:\\n\\n*go-deployment.yaml*\\n\\n```yaml\\napiVersion: apps/v1\\nkind: Deployment\\nmetadata:\\n  name: go-prom-app\\n  namespace: keda-demo\\nspec:\\n  selector:\\n    matchLabels:\\n      app: go-prom-app\\n  template:\\n    metadata:\\n      labels:\\n        app: go-prom-app\\n    spec:\\n      containers:\\n        - name: go-prom-app\\n          image: djam97/keda\\n          imagePullPolicy: Always\\n          ports:\\n            - containerPort: 8080\\n---\\napiVersion: v1\\nkind: Service\\nmetadata:\\n  name: go-prom-app-service\\n  namespace: keda-demo\\n  labels:\\n    run: go-prom-app-service\\nspec:\\n  ports:\\n    - port: 8080\\n      protocol: TCP\\n  selector:\\n    app: go-prom-app\\n```\\n\\nYou can replace the image name with your own image if you prefer that.\\nLet\'s apply the manifest:\\n\\n```sh\\n$ kubectl apply -f go-deployment.yaml\\n```\\n\\nIf the pod is up verify if it is working\\n\\n```sh\\n$ kubectl port-forward svc/go-prom-app-service 8080\\n```\\n\\nIf you visit `http://localhost:8080` you should see `Hello, you\'ve requested: /`.\\n\\n### Scaling the application\\n\\nNow that we have our go application up we can write a manifest that will scale\\nour application. Keda offers many triggers that can scale our application, but\\nof course we will use the [Prometheus\\ntrigger](https://keda.sh/docs/2.4/scalers/prometheus/).\\n\\nIn a new file called scaled-object.yaml add the following content:\\n\\n```yaml\\napiVersion: keda.sh/v1alpha1\\n# Custom CRD provisioned by the Keda operator\\nkind: ScaledObject\\nmetadata:\\n  name: prometheus-scaledobject\\nspec:\\n  scaleTargetRef:\\n    # target our deployment\\n    name: go-prom-app\\n  # Interval to when to query Prometheus\\n  pollingInterval: 15\\n  # The period to wait after the last trigger reported active\\n  # before scaling the deployment back to 1\\n  cooldownPeriod: 30\\n  # min replicas keda will scale to\\n  # if you have an app that has an dependency on pubsub\\n  # this would be a good use case to set it to zero\\n  # why keep your app running if your topic has no messages?\\n  minReplicaCount: 1\\n  # max replicas keda will scale to\\n  maxReplicaCount: 20\\n  advanced:\\n    # HPA config\\n    # Read about it here: https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/\\n    horizontalPodAutoscalerConfig:\\n      behavior:\\n        scaleDown:\\n          stabilizationWindowSeconds: 30\\n          policies:\\n            - type: Percent\\n              value: 50\\n              periodSeconds: 30\\n        scaleUp:\\n          stabilizationWindowSeconds: 0\\n          policies:\\n            - type: Percent\\n              value: 50\\n              periodSeconds: 10\\n  triggers:\\n    - type: prometheus\\n      metadata:\\n        # address where keda can reach our prometheus on\\n        serverAddress: http://prometheus-service.keda-demo.svc.cluster.local:9090\\n        # metric on what we want to scale\\n        metricName: http_requests_total\\n        # if treshold is reached then Keda will scale our deployment\\n        threshold: \\"100\\"\\n        query: sum(rate(http_requests[1m]))\\n```\\n\\nRead the yaml manifest and it\u2019s comments to understand what is going on. One\\nimportant note as well is in\\n`advanced.horizontalPodAutoscalerConfig.scaleUp.policies` you can see I have\\nspecified 50%, that means our pod will scale up with 50% of it\u2019s current amount\\nof pods. `1 -> 2 -> 3 -> 5 -> 8 -> 12 -> 18 -> 20` it will stop at 20 pods because\\nthat is the limit we specified.\\n\\nLet\'s apply the manifest:\\n\\n```sh\\n$ kubectl apply -f scaled-object.yaml\\n```\\n\\nThis will provision an HPA in your namespace which you can check with:\\n\\n```sh\\n$ kubectl get hpa\\n```\\n\\nbut because this is a custom CRD you can also query the custom CRD with kubectl:\\n\\n```sh\\n$ kubectl get scaledobject.keda.sh/prometheus-scaledobject\\n\\nNAME                      SCALETARGETKIND      SCALETARGETNAME   MIN   MAX   TRIGGERS     AUTHENTICATION   READY   ACTIVE   FALLBACK   AGE\\nprometheus-scaledobject   apps/v1.Deployment   go-prom-app       1     20    prometheus                    True    False    False      64s\\n```\\n\\nWe can see that our `prometheus-scaledobject` is ready so let\u2019s scale our\\napplication! Remember our application scales on the metric\\n`http_requests_total`\\nand our threshold is only 100 so we should be able reach that threshold. For\\nthis we can use a simple tool called [hey](https://github.com/rakyll/hey).\\n\\n*Run the application*\\n```sh\\n$ kubectl port-forward svc/go-prom-app-service 8080\\n```\\n\\n*In another terminal watch the pods*\\n```sh\\n$ kubectl get pods -w -n keda-demo\\n```\\n\\n*Put load on the application (Do this continuously, until there are 20 pods)*\\n\\n```sh\\n$ hey -n 10000 -m GET http://localhost:8080\\n```\\n\\nIt can take a minute before the application actually starts scaling. After a\\nwhile you should have 20 pods up and running! Now let\u2019s also look at the scale\\ndown process. Stop putting load on the application and let\u2019s just watch the\\npods. This process should go from `20 -> 10 -> 5 - > 2 -> 1`. This is basically\\nhow KEDA goes to work!\\n\\nIf you like KEDA please check out their docs for more examples and what type of\\ndifferent triggers they provide. Happy auto-scaling!"},{"id":"how-to-setup-husky-eslint-prettier","metadata":{"permalink":"/blog/how-to-setup-husky-eslint-prettier","editUrl":"https://github.com/djamaile/portfolio/edit/master/blog/2021-10-12-how-to-setup-husky-eslint-prettier.md","source":"@site/blog/2021-10-12-how-to-setup-husky-eslint-prettier.md","title":"How to setup husky, eslint and prettier within minutes","description":"Every project these days needs a linter of some sorts. So, let\u2019s set one up for our React/Typescript project!","date":"2021-10-12T00:00:00.000Z","tags":[{"inline":true,"label":"react","permalink":"/blog/tags/react"},{"inline":true,"label":"typescript","permalink":"/blog/tags/typescript"}],"readingTime":4.74,"hasTruncateMarker":true,"authors":[{"name":"Djamaile Rahamat","title":"Software Engineer","url":"https://github.com/djamaile","imageURL":"https://avatars.githubusercontent.com/u/15789670?v=4","key":"djamaile","page":null}],"frontMatter":{"slug":"how-to-setup-husky-eslint-prettier","title":"How to setup husky, eslint and prettier within minutes","authors":["djamaile"],"tags":["react","typescript"]},"unlisted":false,"prevItem":{"title":"Using KEDA and Prometheus to scale your k8s workloads","permalink":"/blog/using-keda-and-prometheus"},"nextItem":{"title":"How I structure my React /TS applications (2021)","permalink":"/blog/how-i-structure-my-react-ts-applications-2021"}},"content":"Every project these days needs a linter of some sorts. So, let\u2019s set one up for our React/Typescript project!\\n\\n\x3c!--truncate--\x3e\\n\\nrepository: https://github.com/djamaile/hep-demo\\n\\n### Starting up\\n\\nLet\u2019s first generate a simple React project by using `create-react-app`. Execute the following command:\\n\\n```sh\\nnpx create-react-app hep-demo --template typescript && cd hep-demo\\n```\\n\\nStart the app and see if everything is working properly:\\n\\n```sh\\nyarn start\\n```\\n\\n:::tip\\n\\nIf you encounter a issue with \\"babel-jest\\": \\"^26.6.0\\" add a .env file with `SKIP_PREFLIGHT_CHECK=true` (echo \'SKIP_PREFLIGHT_CHECK=true\' > .env )\\n\\n:::\\n\\n### Installing packages\\n\\nNow that our app is working we can start by adding the needed packages. \\nFor this setup we would need prettier, husky, lint-staged, eslint-config-airbnb and spotify/prettier-config.\\nThe last one is optional, you can also create your own prettier config but recently\\nI have been using spotify\'s config with pleasant results. \\n\\nTo install the packages, execute the following command:\\n\\n```sh\\nyarn add @spotify/prettier-config @typescript-eslint/parser husky lint-staged prettier -D\\n```\\n\\nWe will use the eslint config of airbnb to do that execute the following command: \\n\\n```sh\\nnpx install-peerdeps --dev eslint-config-airbnb\\n```\\n\\nIn the root of your project, create a file called `.eslintrc.json` and add the following content to it:\\n\\n```json\\n{\\n  \\"extends\\": [\\n    \\"airbnb\\"\\n  ],\\n  \\"parser\\": \\"@typescript-eslint/parser\\",\\n  \\"env\\": {\\n    \\"browser\\": true,\\n    \\"commonjs\\": true,\\n    \\"es6\\": true,\\n    \\"jest\\": true,\\n    \\"node\\": true\\n  },\\n  \\"rules\\": {\\n    \\"no-console\\": \\"off\\",\\n    \\"import/prefer-default-export\\": \\"off\\",\\n    \\"@typescript-eslint/camelcase\\": [\\"off\\"],\\n    \\"camelcase\\": [\\"off\\"],\\n    \\"react/jsx-props-no-spreading\\": [\\"off\\"],\\n    \\"jsx-a11y/no-static-element-interactions\\": \\"off\\",\\n    \\"react/prop-types\\": [\\"off\\"],\\n    \\"jsx-a11y/href-no-hash\\": [\\"off\\"],\\n    \\"jsx-a11y/click-events-have-key-events\\": [\\"off\\"],\\n    \\"import/no-unresolved\\": [\\"off\\"],\\n    \\"import/extensions\\": 0,\\n    \\"no-use-before-define\\": \\"off\\",\\n    \\"react/jsx-uses-react\\": \\"off\\",\\n    \\"react/react-in-jsx-scope\\": \\"off\\",\\n    \\"react/jsx-filename-extension\\": [\\n      \\"warn\\",\\n      {\\n        \\"extensions\\": [\\".js\\", \\".jsx\\", \\".tsx\\", \\".ts\\"]\\n      }\\n    ],\\n    \\"max-len\\": [\\n      \\"warn\\",\\n      {\\n        \\"code\\": 100,\\n        \\"tabWidth\\": 2,\\n        \\"comments\\": 80,\\n        \\"ignoreComments\\": false,\\n        \\"ignoreTrailingComments\\": true,\\n        \\"ignoreUrls\\": true,\\n        \\"ignoreStrings\\": true,\\n        \\"ignoreTemplateLiterals\\": true,\\n        \\"ignoreRegExpLiterals\\": true\\n      }\\n    ]\\n  }\\n}\\n```\\n\\nYou, of course, don\u2019t have to use the same rules as mine. Play with it and see what fits you the best!\\n\\n### Configure package json\\n\\nOnce the packages are installed, we can make some changes in our package.json. Let\u2019s first start with some handy scripts:\\n\\n```json\\n\\"scripts\\": {\\n    ...\\n    \\"prettier:check\\": \\"prettier --check .\\",\\n    \\"prettier:write\\": \\"prettier --write .\\",\\n    \\"prepare\\": \\"husky install\\"\\n}\\n```\\n\\nThe prettier commands are there to check your code and the prepare script we will use in a bit to set up husky with a pre-commit hook.\\n\\nBut first in your `package.json` down below you can set prettier to `@spotify/prettier-config` and under that you can specify the `lint-staged` section.\\n\\n```json\\n\\"prettier\\": \\"@spotify/prettier-config\\",\\n\\"lint-staged\\": {\\n    \\"*.{js,jsx,ts,tsx}\\": [\\n      \\"eslint --fix\\",\\n      \\"prettier --write\\"\\n    ],\\n    \\"*.{json,md}\\": [\\n      \\"prettier --write\\"\\n    ]\\n}\\n```\\n\\n`lint-staged` will execute those commands on files that are ready to be committed. Basically, it will run its specified linter on all staged git files. But before that is possible, we need to make sure that husky triggers `lint-staged`.\\n\\nIn the root of your project run:\\n\\n```sh\\nyarn prepare\\n```\\n\\nWhich will create the `.husky` folder in your project and after we can install a pre-commit hook:\\n\\n```sh\\nnpx husky add .husky/pre-commit \\"yarn lint-staged\\" \\n```\\n\\nThis will create a pre-commit hook in the `.husky` folder. If we inspect the contents of the file you can see that it will run `yarn lint-staged`.\\n\\n### Ignore files\\n\\nBefore we can test if it works, we should also create .ignore files for prettier and eslint. We don\'t want to end up scanning the `node_modules` folder! Create the files:\\n\\n```sh\\ntouch .eslintignore\\ntouch .prettierignore\\n```\\n\\nIn both of the files you can add the same folders to ignore:\\n\\n```\\n**/node_modules/**\\n**/build/**\\n**/dist/**\\n**/.git/**\\n**/public/**\\n```\\n\\n### Testing\\n\\nNow we can actually test if our setup works! First, we\u2019ll need to set up a git for our project:\\n\\n```sh\\ngit init\\ngit add .\\ngit commit -m \\"first commit\\"\\n```\\n\\nAfter you try to commit, you can see husky in action. It will execute `yarn lint-staged` which in turns calls prettier and eslint for our git staged files.\\n\\nTo see if it works on new stuff, let\u2019s create a file called `Button.tsx` in the src directory. Once you have done that, add the following code to it:\\n\\n```jsx\\nimport React from \'react\';\\n\\ninterface Props {\\n  size: string;\\n}\\n\\nexport const Button: React.FC<Props> = ({size}) => {\\n  size = \'big\'; return <button>{size}</button>;\\n};\\n```\\n\\nSo, this piece of code is wrong but let eslint tell us why. Add the file and try to commit it:\\n\\n```sh\\ngit add .\\ngit commit -m \\"feat: add button component\\"\\n```\\n\\nIf eslint is working well you should receive this error:\\n\\n```sh\\n error  Assignment to function parameter \'size\'      no-param-reassign\\n\\n error  Missing an explicit type attribute for button  react/button-has-type\\n\\n ```\\n\\nSeems like we have some errors, so let\u2019s fix them before committing our button. Overwrite `Button.tsx` with the fixed code:\\n\\n ```jsx\\n import React from \'react\';\\n\\ninterface Props {\\n  size: string;\\n}\\n\\nexport const Button: React.FC<Props> = ({ size }) => {\\n  const rightSize = size ? \'big\' : \'small\'; return <button type=\\"button\\">{rightSize}</button>;\\n};\\n```\\n\\nThe code now looks good, but the styling might look a bit off. But that is okay. We are going to let prettier handle that. Let\u2019s try again to add and commit our Button component.\\n\\n```sh\\ngit add .\\ngit commit -m \\"feat: add button component\\"\\n```\\n\\nNow we should be greeted by green light and that our component is commited! In addition, if we look at the button component we can see that prettier has rewritten our component, to make it look nicer!\\n\\n```jsx\\nimport React from \'react\';\\n\\ninterface Props {\\n  size: string;\\n}\\n\\nexport const Button: React.FC<Props> = ({ size }) => {\\n  const rightSize = size ? \'big\' : \'small\';\\n  return <button type=\\"button\\">{rightSize}</button>;\\n};\\n```"},{"id":"how-i-structure-my-react-ts-applications-2021","metadata":{"permalink":"/blog/how-i-structure-my-react-ts-applications-2021","editUrl":"https://github.com/djamaile/portfolio/edit/master/blog/2021-08-06-how-i-structure-my-react-ts-applications-2021.md","source":"@site/blog/2021-08-06-how-i-structure-my-react-ts-applications-2021.md","title":"How I structure my React /TS applications (2021)","description":"(code is hosted at//github.com/djamaile/react-boilerplate-2021)","date":"2021-08-06T00:00:00.000Z","tags":[{"inline":true,"label":"typescript","permalink":"/blog/tags/typescript"},{"inline":true,"label":"javascript","permalink":"/blog/tags/javascript"},{"inline":true,"label":"react","permalink":"/blog/tags/react"}],"readingTime":4.61,"hasTruncateMarker":true,"authors":[{"name":"Djamaile Rahamat","title":"Software Engineer","url":"https://github.com/djamaile","imageURL":"https://avatars.githubusercontent.com/u/15789670?v=4","key":"djamaile","page":null}],"frontMatter":{"slug":"how-i-structure-my-react-ts-applications-2021","title":"How I structure my React /TS applications (2021)","authors":["djamaile"],"tags":["typescript","javascript","react"]},"unlisted":false,"prevItem":{"title":"How to setup husky, eslint and prettier within minutes","permalink":"/blog/how-to-setup-husky-eslint-prettier"},"nextItem":{"title":"How I structure my React/TS applications","permalink":"/blog/how-i-structure-my-react-ts-applications"}},"content":"(code is hosted at: https://github.com/djamaile/react-boilerplate-2021)\\n\\n(last years post: https://dev.to/djamaile/how-i-structure-my-react-ts-applications-160g)\\n\\nLast year, I created a post on how I structure my ReactJS projects. Now that it is summer vacation again, I shook the structure up a bit. But honestly there are few changes, because in the end React changed little (which is a good thing). So, in this post I will highlight what I changed/added.\\n\\nLets first start with a picture of the whole folder structure!\\n\\n\x3c!--truncate--\x3e\\n\\n![Folder structure](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/v2gi5gcq2xp701ek0mq5.png)\\n\\nNow lets discuss the changes :)\\n\\n### \ud83d\udcd6 Api\\n\\nIn the API folder, I only now have a generic request function and what I added was react-query. If you are not familiar with react-query, it is a library for fetching server state. React-query comes with a lot of power like caching, data synchronisation, etc.\\n\\nIn this project, I have kept react-query pretty simple by only adding a `defaultQueryFn`, what looks like this:\\n\\n```js\\nimport axios, { Method, AxiosResponse } from \'axios\';\\n\\nconst api = axios.create({\\n  // baseURL: process.env.REACT_APP_HOST_BACKEND,\\n  baseURL: \'https://rickandmortyapi.com/api\',\\n});\\n\\nconst request = <T>(\\n  method: Method,\\n  url: string,\\n  params: any,\\n): Promise<AxiosResponse<T>> => {\\n  return (\\n    api.request <\\n    T >\\n    {\\n      method,\\n      url,\\n      params,\\n    }\\n  );\\n};\\n\\n// Define a default query function that will receive the query key\\nexport const defaultQueryFn = async ({ queryKey }: any): Promise<unknown> => {\\n  const data = await request(queryKey[0], queryKey[1], queryKey[2]);\\n  return data;\\n};\\n```\\n\\nAs you can see, the `defaultQueryFn` is calling the `request` function. Now we can add this to our `QueryClient` and in our Home view we can call the `useQuery` functionality like this:\\n\\n```js\\nimport React from \'react\';\\nimport \'../../styles/home.css\';\\nimport { useQuery } from \'react-query\';\\nimport { Header } from \'../../components\';\\n\\nconst Home: React.FC = () => {\\n  const { data, error, isFetching } = useQuery([\'GET\', \'/character\', {}]);\\n\\n  if (isFetching) return <p>Is loading...</p>;\\n\\n  if (error) return <p>${error}</p>;\\n\\n  console.log(data);\\n\\n  return (\\n    <div className=\\"App\\">\\n      <Header />\\n    </div>\\n  );\\n};\\n\\nexport default Home;\\n```\\n\\nI am still experimenting with react-query and see how I can use it better. But this is how I have been using it for now.\\n\\n### \ud83e\uddea Tests/Cypress\\n\\nYes, the infamous test folder. I actually ended up deleting it! I still have tests but I put them directly into the views/[view] folder.\\n\\n![Test code in component](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wdq0o5ephjy6o95m8b77.png)\\n\\nI have to admit that I am not using Jest as much anymore. I have switched over to using Cypress. Cypress is a tool for end-to-end tests and I have been liking it so far. So, in `cypress/integration/404_page.ts` you can see I have a spec test that tests if the user can go back to the home page if the user has reached to 404 page.\\n\\n```js\\ndescribe(\'404 page\', function () {\\n  it(\'should give the option to return to home\', function () {\\n    cy.visit(\'/does-not-exists\');\\n    cy.contains(\'Return to Home\');\\n    cy.get(\'a\').click();\\n    cy.contains(\'Learn React\', { timeout: 10000 });\\n  });\\n});\\n```\\n\\n### \ud83d\udc33 Docker\\n\\nI have added also Dockerfiles to my default repo. I have two separate two Dockerfiles, one for development and one for production.\\n\\n```Dockerfile\\nFROM node:15-alpine AS builder\\n\\nWORKDIR /app\\n\\nCOPY . .\\n\\nRUN yarn install\\n\\nRUN yarn build\\n\\nFROM nginx:stable-alpine\\n\\nWORKDIR /usr/share/nginx/html\\n\\nRUN rm -rf *\\n\\nCOPY --from=builder /app/build .\\n\\nENTRYPOINT [\\"nginx\\", \\"-g\\", \\"daemon off;\\"\\n```\\n\\nTo build a image use:\\n\\n```sh\\n$ docker build -t djam97/react-boilerplate-2021:prod -f docker/Dockerfile.prod .\\n```\\n\\n### \u2638\ufe0f Kubernetes\\n\\nI use Kubernetes daily so that\'s why I added also some k8s manifests. They are pretty bare bone, but they get the job done and are easily extensible.\\n\\n```yaml\\napiVersion: apps/v1\\nkind: Deployment\\nmetadata:\\n  name: react-boiler-plate\\n  labels:\\n    app: react-boiler-plate\\nspec:\\n  replicas: 1\\n  selector:\\n    matchLabels:\\n      app: react-boiler-plate\\n  template:\\n    metadata:\\n      labels:\\n        app: react-boiler-plate\\n    spec:\\n      containers:\\n        - name: react-boiler-plate\\n          image: djam97/react-boilerplate-2021:prod\\n          imagePullPolicy: Never\\n          ports:\\n            - containerPort: 3000\\n---\\napiVersion: v1\\nkind: Service\\nmetadata:\\n  name: react-boiler-plate-service\\nspec:\\n  selector:\\n    app: react-boiler-plate\\n  ports:\\n    - protocol: TCP\\n      port: 3000\\n      targetPort: 3000\\n```\\n\\nTo apply the manifests use:\\n\\n```sh\\n$ kubectl apply -f k8s/\\n```\\n\\n### \ud83d\ude3a Github workflow\\n\\nI have also added a Github action that deploys your React app to Github pages. This is great for initial testing or for when your site is not going to have live on it\'s own server.\\n\\n```yaml\\nname: Deploy site\\n\\non:\\n  push:\\n    branches: [main]\\n\\njobs:\\n  build:\\n    runs-on: ubuntu-latest\\n    continue-on-error: true\\n    strategy:\\n      matrix:\\n        node-version: [14.x]\\n    steps:\\n      - uses: actions/checkout@v2\\n      - name: Setup Node\\n        uses: actions/setup-node@v1\\n        with:\\n          node-version: \'14.x\'\\n      - name: Get yarn cache\\n        id: yarn-cache\\n        run: echo \\"::set-output name=dir::$(yarn cache dir)\\"\\n      - name: Cache dependencies\\n        uses: actions/cache@v1\\n        with:\\n          path: ${{ steps.yarn-cache.outputs.dir }}\\n          key: ${{ runner.os }}-yarn-${{ hashFiles(\'**/yarn.lock\') }}\\n          restore-keys: |\\n            ${{ runner.os }}-yarn-\\n      - name: Yarn installation\\n        run: yarn install && CI=\'\' yarn build\\n      - name: Deploy\\n        uses: peaceiris/actions-gh-pages@v3\\n        with:\\n          github_token: ${{ secrets.ACCESS_TOKEN }}\\n          publish_dir: ./buil\\n```\\n\\nIf you also want to use it, there are some steps you need to take. First, you need to create a personal access token in GitHub and add it as a secret to your repo as `ACCESS_TOKEN`. Last, change the homepage in `package.json`\\n\\n```sh\\n - \\"homepage\\": \\"https://djamaile.github.io/react-boilerplate-2021\\",\\n + \\"homepage\\": \\"https://<your username>.github.io/react-boilerplate-2021\\",\\n```\\n\\n###\ud83d\uddc4\ufe0f Extra files\\nBesides the usual prettier, eslint, husky setup. I have also added `@commitlint/config-conventional` to make sure every commit complies with being a conventional commit. If you don\'t know what that is, you can read up on it here: https://www.conventionalcommits.org/en/v1.0.0/#summary"},{"id":"how-i-structure-my-react-ts-applications","metadata":{"permalink":"/blog/how-i-structure-my-react-ts-applications","editUrl":"https://github.com/djamaile/portfolio/edit/master/blog/2020-07-15-how-i-structure-my-react-ts-applications.md","source":"@site/blog/2020-07-15-how-i-structure-my-react-ts-applications.md","title":"How I structure my React/TS applications","description":"(I have updated my react structure, you can read it here//dev.to/djamaile/how-i-structure-my-react-ts-applications-2021-145j)","date":"2020-07-15T00:00:00.000Z","tags":[{"inline":true,"label":"typescript","permalink":"/blog/tags/typescript"},{"inline":true,"label":"javascript","permalink":"/blog/tags/javascript"},{"inline":true,"label":"react","permalink":"/blog/tags/react"}],"readingTime":3.06,"hasTruncateMarker":true,"authors":[{"name":"Djamaile Rahamat","title":"Software Engineer","url":"https://github.com/djamaile","imageURL":"https://avatars.githubusercontent.com/u/15789670?v=4","key":"djamaile","page":null}],"frontMatter":{"slug":"how-i-structure-my-react-ts-applications","title":"How I structure my React/TS applications","authors":["djamaile"],"tags":["typescript","javascript","react"]},"unlisted":false,"prevItem":{"title":"How I structure my React /TS applications (2021)","permalink":"/blog/how-i-structure-my-react-ts-applications-2021"},"nextItem":{"title":"Small React(ion): From Kanji to Hiragana!","permalink":"/blog/small-react-ion-from-kanji-to-hiragana"}},"content":"(I have updated my react structure, you can read it here: https://dev.to/djamaile/how-i-structure-my-react-ts-applications-2021-145j)\\n\\nIt is currently summer vacation for me and I will be working on side projects. For my summer projects, I will use ReactJS for every front-end I create. I created a boilerplate repository that I can re-use for every side project. So, the goal of this post is to display my structure, but I am interested in your project structure and how you would do it differently.\\n\\nIf you just want to see the code, here you go: https://github.com/djamaile/react-boilerplate-2020\\n\\n\x3c!--truncate--\x3e\\n\\nHere is the picture of the structure:![Alt Text](https://dev-to-uploads.s3.amazonaws.com/i/1mh1pdk40jyrccmdru6z.png)\\n\\nLet\'s dive into the folders!\\n\\n### \ud83d\udcd6 Api\\n\\nIn the API folder, I keep my API routes and API calls. Also, I create a generic request function with Axios. Which can be reused for API-requests.\\n\\n![Alt Text](https://dev-to-uploads.s3.amazonaws.com/i/a5octo4kc27ceha3jqau.png)\\n\\n### \ud83d\uddbc\ufe0f Assets\\n\\nIn the assets folders, I have three subfolders. Firstly, the CSS folder where I keep all my in-js-CSS files. Secondly, the images folder and I think this folder speaks for itself. Lastly, the theme folder and the theme folder is for Material-UI.\\n\\nFor every React project, I use Material-UI. With Material-UI we can also create a custom theme and that is what we do in the theme folder.\\n![Alt Text](https://dev-to-uploads.s3.amazonaws.com/i/idadf0blnt7f7c6ji1zc.png)\\n\\n### \ud83e\uddf1 Components\\n\\nFurthermore, we have the famous components folder. Re-usable functions will be put in the components folder and it can be used by functional components in the views folder.\\n\\n### \u2602\ufe0f Hooks\\n\\nThe hooks folder is cool but mostly unused. I rarely make custom hooks, but I still keep the folder there in case I have some genius idea that needs to be a hook.\\n\\n### \ud83d\uddfa\ufe0f Routes\\n\\nIn the routes folder, I keep my routes! I think the only \'weird\' thing I do in my routes folder is using suspense. I am using suspense to split the code of the views. Also, we use the theme provider of Material-UI so we can use the theme we created in the theme folder.\\n![Alt Text](https://dev-to-uploads.s3.amazonaws.com/i/xj6exwb4uk24xn0438iy.png)\\n\\n### \ud83e\uddea Tests\\n\\nTests folder is there, but the question is if I even test...\\n\\n### \u2328\ufe0f Types\\n\\nSo, as you know I am using Typescript. Therefore I have a folder called types where I can put in my Typescript types and interfaces. Props types are the only exemption. They get declared above the components themself.\\n\\n### \ud83d\udd28 Utils\\n\\nI always create a lot of functions within a component. As a result, the component can become quite bloated. When I feel that is happening I will move the functions within the utils folder. Also, if a function is used by some other component then it is also going to the utils folder.\\n\\n### \ud83d\uddc4\ufe0f Extra files\\n\\nAs you can see I still have some files at the root level. The important files are the configuration files for Eslint and Prettier. These two extend the Airbnb rules. Moreover, I have my own rules within them and for anyone with experience with Eslint and Prettier, it can be quite annoying to set them up. So, having these files already configured for every project I do is a lifesaver.\\n\\nWell, that is my structure. You might be wondering but where are the folders for your state management? Well, I didn\'t create those folders because I use different state managers all the time. It just depends on what I want to use at that moment. How does your structure compare to mine?"},{"id":"small-react-ion-from-kanji-to-hiragana","metadata":{"permalink":"/blog/small-react-ion-from-kanji-to-hiragana","editUrl":"https://github.com/djamaile/portfolio/edit/master/blog/2020-07-08-small-react-ion-from-kanji-to-hiragana.md","source":"@site/blog/2020-07-08-small-react-ion-from-kanji-to-hiragana.md","title":"Small React(ion): From Kanji to Hiragana!","description":"I am starting a series talking about my small React applications. To begin, we start with this small application I wrote about 7 months ago. If you just want to see the code, here you go//github.com/djamaile/kanji-to-hiragana/","date":"2020-07-08T00:00:00.000Z","tags":[{"inline":true,"label":"typescript","permalink":"/blog/tags/typescript"},{"inline":true,"label":"javascript","permalink":"/blog/tags/javascript"},{"inline":true,"label":"react","permalink":"/blog/tags/react"}],"readingTime":2.64,"hasTruncateMarker":true,"authors":[{"name":"Djamaile Rahamat","title":"Software Engineer","url":"https://github.com/djamaile","imageURL":"https://avatars.githubusercontent.com/u/15789670?v=4","key":"djamaile","page":null}],"frontMatter":{"slug":"small-react-ion-from-kanji-to-hiragana","title":"Small React(ion): From Kanji to Hiragana!","authors":["djamaile"],"tags":["typescript","javascript","react"]},"unlisted":false,"prevItem":{"title":"How I structure my React/TS applications","permalink":"/blog/how-i-structure-my-react-ts-applications"}},"content":"I am starting a series talking about my small React applications. To begin, we start with this small application I wrote about 7 months ago. If you just want to see the code, here you go: https://github.com/djamaile/kanji-to-hiragana/\\n\\n\x3c!--truncate--\x3e\\n\\n### Background\\n\\nA couple of months ago I was studying Japanese. I was about to graduate (I just did!) and I wanted to celebrate that with a trip to Japan. Unfortunately, that trip got canceled. But we still have this cool program!\\n\\nI first started with learning hiragana and hiragana is the Japanese alphabet. After that, I started learning katakana which is also an alphabet but it is only used to describe western words/names. Then I started learning kanji. Kanji are characters to describe nouns, adjectives, adverbs, and verbs. In short, kanji are characters for words we could also describe in hiragana.\\n\\n![Alt Text](https://dev-to-uploads.s3.amazonaws.com/i/ks6twc0c71qy3spy0jqa.gif)\\n\\nExample: Hello world (English) -> Hello \u305b\u304b\u3044 (Hiragana) -> Hello \u4e16\u754c (Kanji)\\n\\nNote: There are probably way better resources to explain this so, I suggest hitting up Google if you are more interested in this.\\n\\nSo, I was studying Japanese with Anki. Anki is a software program where we can use flashcards. Sometimes I would get cards with kanji on them and I would have no idea how to pronounce the word. The back of the flashcard would only tell the English translation and not show the full word in hiragana.\\n\\nFurthermore, knowing the hiragana in the kanji could not only help with pronunciation but also help me better remembering the kanji. So, I wanted to translate the words with kanji in them to hiragana. Well for that I needed an API of some sort. Surprisingly I found one from https://labs.goo.ne.jp/. I can\'t exactly remember how I found but it did have the required API!\\n\\n### Application\\n\\nSo, I started writing my React application with this simple idea: I want to input kanji and get only hiragana back.\\n\\nFirst, I checked if the given input was Japanese and this can be done with simple regex. If the input was not Japanese then an error would show up and alarm the user.\\n\\n![Alt Text](https://dev-to-uploads.s3.amazonaws.com/i/zeq4hddm8exdckyrth70.png)\\n\\nSecond, the actual translation from kanji to hiragana. When I was building this I very much into hooks. So, I made a custom hook for the translation. In the hook, we would use the function above to check if the input is Japanese. After the check, I take the input and send a request to the API and store the result.\\n\\n![Alt Text](https://dev-to-uploads.s3.amazonaws.com/i/q230d7xsp4o38t7c5z69.png)\\n\\nLastly, I put two text boxes on the homepage and imported the hook. The application was done and it worked! I do have the mention that they are probably caveats, because of how complicated kanji is. But for the time I used it, it worked well!\\n\\n![Alt Text](https://dev-to-uploads.s3.amazonaws.com/i/cof70w5wgezbk6ayzeea.gif)\\n\\n### Future\\n\\nWell, I stopped using it, because I eventually found better Anki decks. But if someone has an idea or wants to contribute please let me know!"}]}}')}}]);